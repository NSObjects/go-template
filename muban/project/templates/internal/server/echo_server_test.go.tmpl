package server

import (
	"testing"
	"{{.ModulePath}}/internal/configs"
)

func TestNewEchoServer(t *testing.T) {
	cfg := configs.Config{
		System: configs.SystemConfig{
			Port: ":8080",
			Env:  "test",
		},
	}

	params := Params{
		Cfg:   cfg,
		Store: configs.NewStore(cfg),
	}

	server := NewEchoServer(params)
	if server == nil {
		t.Fatal("server should not be nil")
	}

	if server.Server() == nil {
		t.Fatal("echo server should not be nil")
	}
}

func TestEchoServerRun(t *testing.T) {
	cfg := configs.Config{
		System: configs.SystemConfig{
			Port: ":8081",
			Env:  "test",
		},
	}

	params := Params{
		Cfg:   cfg,
		Store: configs.NewStore(cfg),
	}

	server := NewEchoServer(params)
	
	// 测试服务器配置
	if server.config.Port != ":8081" {
		t.Errorf("expected port :8081, got %s", server.config.Port)
	}
}
