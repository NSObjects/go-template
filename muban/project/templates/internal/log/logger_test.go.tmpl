package log

import (
	"testing"
	"{{.ModulePath}}/internal/configs"
)

func TestNewLogger(t *testing.T) {
	cfg := configs.Config{
		Log: configs.LogConfig{
			Level:  "info",
			Format: "json",
		},
	}

	logger := NewLogger(cfg)
	if logger == nil {
		t.Fatal("logger should not be nil")
	}

	// 测试日志输出
	logger.Info("test message", "key", "value")
}

func TestLoggerWith(t *testing.T) {
	cfg := configs.Config{
		Log: configs.LogConfig{
			Level:  "debug",
			Format: "text",
		},
	}

	logger := NewLogger(cfg)
	withLogger := logger.With("service", "test")
	
	if withLogger == nil {
		t.Fatal("with logger should not be nil")
	}

	withLogger.Debug("test with context")
}
